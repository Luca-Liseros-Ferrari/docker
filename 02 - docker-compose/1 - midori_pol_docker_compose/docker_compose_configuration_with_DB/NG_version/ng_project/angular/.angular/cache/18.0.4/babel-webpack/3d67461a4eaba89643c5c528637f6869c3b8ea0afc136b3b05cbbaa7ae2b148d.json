{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterLink } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../cart.service\";\nimport * as i2 from \"../cart-quantity.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = () => [\"/checkout\"];\nfunction CartComponent_ul_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate3(\" Nome: \", product_r2.name, \" - Quantit\\u00E0: \", product_r2.quantity, \" - Categoria: \", product_r2.category, \" \");\n  }\n}\nfunction CartComponent_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ul\", 2);\n    i0.ɵɵtemplate(1, CartComponent_ul_1_li_1_Template, 2, 3, \"li\", 3);\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵtext(3, \" CHECKOUT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CartComponent_ul_1_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteCart(ctx_r2.cartProducts));\n    });\n    i0.ɵɵtext(5, \"delete cart\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cartProducts);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n  }\n}\nexport let CartComponent = /*#__PURE__*/(() => {\n  class CartComponent {\n    constructor(cartService, cartQuantityService) {\n      this.cartService = cartService;\n      this.cartQuantityService = cartQuantityService;\n      this.cartProducts = [];\n      this.isCartVisible = false;\n      this.showCartIcon = false;\n    }\n    ngOnInit() {\n      this.viewCart();\n      this.cartService.cartVisibility$.subscribe(isVisible => {\n        this.showCartIcon = isVisible;\n      });\n    }\n    viewCart() {\n      this.cartService.viewCart().subscribe(cart => {\n        this.cartProducts = cart.cartProducts;\n        this.showCartIcon = this.cartProducts.length > 0;\n      }, error => console.error('Si è verificato un errore durante il recupero del carrello:', error));\n    }\n    toggleCart(data) {\n      this.isCartVisible = !this.isCartVisible;\n      if (this.isCartVisible) {\n        this.viewCart();\n      }\n    }\n    deleteCart(cart) {\n      this.cartService.deleteCart(cart.id).subscribe(() => {\n        console.log('Carrello rimosso');\n        this.cartProducts = []; // Svuota l'array dei prodotti del carrello\n        this.cartService.updateCartVisibility(false); // Nasconde l'icona del carrello\n        this.cartQuantityService.updateTrackQuantity(0); // Aggiorna trackQuantity a 0\n      }, error => console.error('Errore durante la rimozione del carrello:', error));\n    }\n    static #_ = this.ɵfac = function CartComponent_Factory(t) {\n      return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.CartQuantityService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CartComponent,\n      selectors: [[\"app-cart\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 2,\n      vars: 3,\n      consts: [[\"src\", \"../../assets/images/cart/cartImg.svg\", 1, \"cartIcon\", 3, \"click\"], [\"class\", \"productInCart\", 4, \"ngIf\"], [1, \"productInCart\"], [4, \"ngFor\", \"ngForOf\"], [1, \"goToCheckout\", 3, \"routerLink\"], [1, \"deleteCart\", 3, \"click\"]],\n      template: function CartComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"img\", 0);\n          i0.ɵɵlistener(\"click\", function CartComponent_Template_img_click_0_listener($event) {\n            return ctx.toggleCart($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(1, CartComponent_ul_1_Template, 6, 3, \"ul\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵstyleProp(\"display\", ctx.showCartIcon ? \"block\" : \"none\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isCartVisible && ctx.cartProducts.length > 0);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, HttpClientModule, RouterLink],\n      styles: [\".productInCart[_ngcontent-%COMP%], .cartIcon[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n}\\n\\n.trackQuantity[_ngcontent-%COMP%] {\\n  color: white;\\n  position: fixed;\\n  top: -15px;\\n  font-size: 20px;\\n  right: 35px;\\n  z-index: 999;\\n}\\n\\n.cartIcon[_ngcontent-%COMP%] {\\n  height: 10%;\\n  margin: 10px;\\n  cursor: pointer;\\n}\\n\\n.productInCart[_ngcontent-%COMP%] {\\n  display: grid;\\n  align-items: center;\\n  justify-items: center;\\n  top: 100px;\\n  margin-right: 20px;\\n  border: solid 2px green;\\n  background: #000;\\n  height: 300px;\\n}\\n\\n.productInCart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  margin: 10px 20px -10px 20px;\\n  padding: 10px;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0VBQ2YsTUFBTTtFQUNOLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFlBQVk7RUFDWixlQUFlO0VBQ2YsVUFBVTtFQUNWLGVBQWU7RUFDZixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixxQkFBcUI7RUFDckIsVUFBVTtFQUNWLGtCQUFrQjtFQUNsQix1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixhQUFhO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyIucHJvZHVjdEluQ2FydCwgLmNhcnRJY29uIHtcclxuICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgdG9wOiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG59XHJcblxyXG4udHJhY2tRdWFudGl0eSB7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBvc2l0aW9uOiBmaXhlZDtcclxuICB0b3A6IC0xNXB4O1xyXG4gIGZvbnQtc2l6ZTogMjBweDtcclxuICByaWdodDogMzVweDtcclxuICB6LWluZGV4OiA5OTk7XHJcbn1cclxuXHJcbi5jYXJ0SWNvbiB7XHJcbiAgaGVpZ2h0OiAxMCU7XHJcbiAgbWFyZ2luOiAxMHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnByb2R1Y3RJbkNhcnQge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWl0ZW1zOiBjZW50ZXI7XHJcbiAgdG9wOiAxMDBweDtcclxuICBtYXJnaW4tcmlnaHQ6IDIwcHg7XHJcbiAgYm9yZGVyOiBzb2xpZCAycHggZ3JlZW47XHJcbiAgYmFja2dyb3VuZDogIzAwMDtcclxuICBoZWlnaHQ6IDMwMHB4O1xyXG59XHJcblxyXG4ucHJvZHVjdEluQ2FydCBsaSB7XHJcbiAgbWFyZ2luOiAxMHB4IDIwcHggLTEwcHggMjBweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n  return CartComponent;\n})();","map":{"version":3,"names":["CommonModule","HttpClientModule","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate3","product_r2","name","quantity","category","ɵɵtemplate","CartComponent_ul_1_li_1_Template","ɵɵlistener","CartComponent_ul_1_Template_button_click_4_listener","ɵɵrestoreView","_r1","ctx_r2","ɵɵnextContext","ɵɵresetView","deleteCart","cartProducts","ɵɵproperty","ɵɵpureFunction0","_c0","CartComponent","constructor","cartService","cartQuantityService","isCartVisible","showCartIcon","ngOnInit","viewCart","cartVisibility$","subscribe","isVisible","cart","length","error","console","toggleCart","data","id","log","updateCartVisibility","updateTrackQuantity","_","ɵɵdirectiveInject","i1","CartService","i2","CartQuantityService","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","CartComponent_Template","rf","ctx","CartComponent_Template_img_click_0_listener","$event","CartComponent_ul_1_Template","ɵɵstyleProp","i3","NgForOf","NgIf","styles"],"sources":["C:\\Users\\Utente\\Desktop\\MIDORIBEATSORGANIZED\\angular\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CartService } from '../cart.service';\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { HttpClientModule } from \"@angular/common/http\";\r\nimport { RouterLink } from \"@angular/router\";\r\nimport { CartQuantityService } from \"../cart-quantity.service\";\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  template: `\r\n    <img (click)=\"toggleCart($event)\"\r\n         src=\"../../assets/images/cart/cartImg.svg\" class=\"cartIcon\"\r\n         [style.display]=\"showCartIcon ? 'block' : 'none'\">\r\n    <ul *ngIf=\"isCartVisible && cartProducts.length > 0\" class=\"productInCart\">\r\n      <li *ngFor=\"let product of cartProducts\">\r\n        Nome: {{ product.name }} -\r\n        Quantità: {{ product.quantity }} -\r\n        Categoria: {{ product.category }}\r\n        <!-- immagine eventualmente -->\r\n      </li>\r\n      <button class=\"goToCheckout\" [routerLink]=\"['/checkout']\"> CHECKOUT</button>\r\n      <button (click)=\"deleteCart(cartProducts)\" class=\"deleteCart\">delete cart</button>\r\n    </ul>\r\n  `,\r\n  standalone: true,\r\n  imports: [CommonModule, HttpClientModule, RouterLink],\r\n  styleUrls: ['./cart.component.css']\r\n})\r\nexport class CartComponent implements OnInit {\r\n  cartProducts: any[] = [];\r\n  isCartVisible = false;\r\n  showCartIcon = false;\r\n\r\n  constructor(\r\n    private cartService: CartService,\r\n    private cartQuantityService: CartQuantityService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.viewCart();\r\n    this.cartService.cartVisibility$.subscribe(isVisible => {\r\n      this.showCartIcon = isVisible;\r\n    });\r\n  }\r\n\r\n  viewCart(): void {\r\n    this.cartService.viewCart().subscribe(\r\n      cart => {\r\n        this.cartProducts = cart.cartProducts;\r\n        this.showCartIcon = this.cartProducts.length > 0;\r\n      },\r\n      error => console.error('Si è verificato un errore durante il recupero del carrello:', error)\r\n    );\r\n  }\r\n\r\n  toggleCart(data: MouseEvent): void {\r\n    this.isCartVisible = !this.isCartVisible;\r\n    if (this.isCartVisible) {\r\n      this.viewCart();\r\n    }\r\n  }\r\n\r\n  deleteCart(cart: any): void {\r\n    this.cartService.deleteCart(cart.id).subscribe(\r\n      () => {\r\n        console.log('Carrello rimosso');\r\n        this.cartProducts = []; // Svuota l'array dei prodotti del carrello\r\n        this.cartService.updateCartVisibility(false); // Nasconde l'icona del carrello\r\n        this.cartQuantityService.updateTrackQuantity(0); // Aggiorna trackQuantity a 0\r\n      },\r\n      error => console.error('Errore durante la rimozione del carrello:', error)\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}