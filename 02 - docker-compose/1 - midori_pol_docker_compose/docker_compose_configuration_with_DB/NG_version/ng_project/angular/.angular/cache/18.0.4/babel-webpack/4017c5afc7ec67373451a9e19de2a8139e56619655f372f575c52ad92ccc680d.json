{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterLink } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../cart.service\";\nimport * as i2 from \"../stripe.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = () => [\"\"];\nfunction CheckoutComponent_ul_1_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate3(\" Nome: \", product_r2.name, \" - Quantit\\u00E0: \", product_r2.quantity, \" - Categoria: \", product_r2.category, \" \");\n  }\n}\nfunction CheckoutComponent_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ul\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \" BACK\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CheckoutComponent_ul_1_li_3_Template, 2, 3, \"li\", 4);\n    i0.ɵɵelementStart(4, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_ul_1_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.stripeCheckout());\n    });\n    i0.ɵɵtext(5, \" CONFIRM\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cartProducts);\n  }\n}\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(cartService, stripeService) {\n      this.cartService = cartService;\n      this.stripeService = stripeService;\n      this.cartProducts = [];\n      this.isCartVisible = true;\n    }\n    ngOnInit() {\n      this.viewCart();\n    }\n    viewCart() {\n      this.cartService.viewCart().subscribe(cart => {\n        this.cartProducts = cart.cartProducts;\n      }, error => console.error('Si è verificato un errore durante il recupero del carrello:', error));\n    }\n    stripeCheckout() {\n      this.stripeService.redirectToStripe(this.cartProducts).subscribe(response => {\n        console.log('redirect', response);\n        window.location.href = response;\n      }, error => console.error('Errore nel redirect', error));\n    }\n    static #_ = this.ɵfac = function CheckoutComponent_Factory(t) {\n      return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.StripeService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CheckoutComponent,\n      selectors: [[\"app-checkout\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 2,\n      vars: 3,\n      consts: [[\"src\", \"../../assets/images/cart/cartImg.svg\", 1, \"cartIcon\"], [\"class\", \"productInCart\", 4, \"ngIf\"], [1, \"productInCart\"], [1, \"back\", 3, \"routerLink\"], [4, \"ngFor\", \"ngForOf\"], [1, \"goToStripe\", 3, \"click\"]],\n      template: function CheckoutComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"img\", 0);\n          i0.ɵɵtemplate(1, CheckoutComponent_ul_1_Template, 6, 3, \"ul\", 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵstyleProp(\"display\", \"none\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isCartVisible);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, HttpClientModule, RouterLink],\n      styles: [\"body[_ngcontent-%COMP%] {\\n  background: violet;\\n}\\n\\n.productInCart[_ngcontent-%COMP%] {\\n  display: grid;\\n  padding: 10px;\\n  margin: 100px auto 0 auto;\\n  border: solid 2px green;\\n  width: 90%;\\n  justify-items: center;\\n}\\n\\n.productInCart[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  display: grid;\\n  padding: 10px;\\n  margin: 100px auto 0 auto;\\n  border: solid 2px green;\\n  width: 90%;\\n  justify-items: center;\\n}\\n\\n.goToStripe[_ngcontent-%COMP%] {\\n  margin-top: 50px;\\n  margin-bottom: 50px;\\n}\\n\\n.back[_ngcontent-ng-c2482956064][_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 45px;\\n  left: 60px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2hlY2tvdXQvY2hlY2tvdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixhQUFhO0VBQ2IseUJBQXlCO0VBQ3pCLHVCQUF1QjtFQUN2QixVQUFVO0VBQ1YscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsdUJBQXVCO0VBQ3ZCLFVBQVU7RUFDVixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFNBQVM7RUFDVCxVQUFVO0FBQ1oiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxuICBiYWNrZ3JvdW5kOiB2aW9sZXQ7XHJcbn1cclxuXHJcbi5wcm9kdWN0SW5DYXJ0IHtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgbWFyZ2luOiAxMDBweCBhdXRvIDAgYXV0bztcclxuICBib3JkZXI6IHNvbGlkIDJweCBncmVlbjtcclxuICB3aWR0aDogOTAlO1xyXG4gIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLnByb2R1Y3RJbkNhcnQgbGkge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBtYXJnaW46IDEwMHB4IGF1dG8gMCBhdXRvO1xyXG4gIGJvcmRlcjogc29saWQgMnB4IGdyZWVuO1xyXG4gIHdpZHRoOiA5MCU7XHJcbiAganVzdGlmeS1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uZ29Ub1N0cmlwZSB7XHJcbiAgbWFyZ2luLXRvcDogNTBweDtcclxuICBtYXJnaW4tYm90dG9tOiA1MHB4O1xyXG59XHJcblxyXG4uYmFja1tfbmdjb250ZW50LW5nLWMyNDgyOTU2MDY0XSB7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHRvcDogNDVweDtcclxuICBsZWZ0OiA2MHB4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n  return CheckoutComponent;\n})();","map":{"version":3,"names":["CommonModule","HttpClientModule","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate3","product_r2","name","quantity","category","ɵɵtemplate","CheckoutComponent_ul_1_li_3_Template","ɵɵlistener","CheckoutComponent_ul_1_Template_button_click_4_listener","ɵɵrestoreView","_r1","ctx_r2","ɵɵnextContext","ɵɵresetView","stripeCheckout","ɵɵproperty","ɵɵpureFunction0","_c0","cartProducts","CheckoutComponent","constructor","cartService","stripeService","isCartVisible","ngOnInit","viewCart","subscribe","cart","error","console","redirectToStripe","response","log","window","location","href","_","ɵɵdirectiveInject","i1","CartService","i2","StripeService","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","CheckoutComponent_Template","rf","ctx","ɵɵelement","CheckoutComponent_ul_1_Template","ɵɵstyleProp","i3","NgForOf","NgIf","styles"],"sources":["C:\\Users\\Utente\\Desktop\\MIDORIBEATSORGANIZED\\angular\\src\\app\\checkout\\checkout.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CartService } from '../cart.service';\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { HttpClientModule } from \"@angular/common/http\";\r\nimport {RouterLink} from \"@angular/router\";\r\nimport {StripeService} from \"../stripe.service\";\r\n\r\n@Component({\r\n  selector: 'app-checkout',\r\n  template: `\r\n    <img src=\"../../assets/images/cart/cartImg.svg\" class=\"cartIcon\" [style.display]=\"'none'\">\r\n\r\n    <ul *ngIf=\"isCartVisible\" class=\"productInCart\">\r\n\r\n      <button class=\"back\" [routerLink]=\" ['']\" class=\"back\"> BACK</button>\r\n      <li *ngFor=\"let product of cartProducts\">\r\n        Nome: {{ product.name }} -\r\n        Quantità: {{ product.quantity }} -\r\n        Categoria: {{ product.category }}\r\n      </li>\r\n\r\n      <!-- STRIPE REDIRECT  -->\r\n      <button class=\"stripeRedirect\" (click)=\"stripeCheckout()\" class=\"goToStripe\"> CONFIRM</button>\r\n\r\n    </ul>\r\n  `,\r\n  standalone: true,\r\n  imports: [CommonModule, HttpClientModule, RouterLink],\r\n  styleUrls: ['./checkout.component.css']\r\n})\r\nexport class CheckoutComponent implements OnInit {\r\n  cartProducts: any[] = [];\r\n  isCartVisible = true;\r\n\r\n  constructor(\r\n    private cartService: CartService,\r\n    private stripeService: StripeService,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.viewCart();\r\n  }\r\n\r\n  viewCart(): void {\r\n    this.cartService.viewCart().subscribe(\r\n      cart => {\r\n        this.cartProducts = cart.cartProducts;\r\n      },\r\n      error => console.error('Si è verificato un errore durante il recupero del carrello:', error)\r\n    );\r\n  }\r\n\r\n  stripeCheckout(): void {\r\n    this.stripeService.redirectToStripe(this.cartProducts).subscribe(\r\n      (response) => {\r\n        console.log('redirect', response);\r\n        window.location.href = response;\r\n      },\r\n      error => console.error('Errore nel redirect', error)\r\n    );\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}